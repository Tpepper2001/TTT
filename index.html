<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traffic Simulator (No-Backend Version)</title>
    <style>
        body { font-family: system-ui, sans-serif; padding: 20px; background: #f4f7f6; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; margin-top: 0; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .controls { display: flex; gap: 10px; margin: 20px 0; }
        button { flex: 1; padding: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        #startBtn { background: #27ae60; color: white; }
        #stopBtn { background: #e74c3c; color: white; }
        button:disabled { background: #bdc3c7; cursor: not-allowed; }
        .logs { background: #2c3e50; color: #2ecc71; padding: 15px; border-radius: 8px; height: 300px; overflow-y: auto; font-family: monospace; font-size: 13px; }
        .status-bar { margin-top: 15px; font-size: 0.85rem; color: #7f8c8d; }
        .proxy-note { background: #fff3cd; border-left: 5px solid #ffc107; padding: 10px; margin-bottom: 20px; font-size: 0.85rem; }
    </style>
</head>
<body>

<div class="container">
    <h1>üöÄ Traffic Simulator (Standalone)</h1>
    
    <div class="proxy-note">
        <strong>Note:</strong> Using a public proxy to bypass CORS. No backend required. 
        <em>(Note: High-security sites like Google or Amazon may block public proxies.)</em>
    </div>

    <div class="input-group">
        <label>üéØ Target Link</label>
        <input type="url" id="targetLink" value="https://www.wikipedia.org" placeholder="https://...">
    </div>

    <div class="controls">
        <button id="startBtn" onclick="startSimulation()">Start Simulation</button>
        <button id="stopBtn" onclick="stopSimulation()" disabled>Stop</button>
    </div>

    <div class="logs" id="logs">Ready to start...</div>
    <div class="status-bar" id="statusBar">Sessions: 0 | Clicks: 0</div>
</div>

<script>
    let isRunning = false;
    let clickCount = 0;
    let sessionCount = 0;

    const USER_AGENTS = [
        "Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/121.0.0.0",
        "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Safari/605.1.15",
        "Mozilla/5.0 (iPhone; CPU iPhone OS 17_2 like Mac OS X) Version/17.2 Mobile/15E148 Safari/604.1"
    ];

    function log(msg, color = "#2ecc71") {
        const logs = document.getElementById('logs');
        const time = new Date().toLocaleTimeString();
        logs.innerHTML += `<div style="color: ${color}">[${time}] ${msg}</div>`;
        logs.scrollTop = logs.scrollHeight;
    }

    async function sendRequest(url, ua) {
        // We use corsproxy.io to bypass the browser's block
        const proxyUrl = "https://corsproxy.io/?" + encodeURIComponent(url);
        
        try {
            const response = await fetch(proxyUrl, {
                method: 'GET',
                headers: { 'User-Agent': ua }
            });
            return response.ok;
        } catch (e) {
            return false;
        }
    }

    async function startSimulation() {
        const target = document.getElementById('targetLink').value;
        if (!target) return alert("Enter a URL");

        isRunning = true;
        document.getElementById('startBtn').disabled = true;
        document.getElementById('stopBtn').disabled = false;
        log("Checking connection to proxy...");

        while (isRunning) {
            sessionCount++;
            const ua = USER_AGENTS[Math.floor(Math.random() * USER_AGENTS.length)];
            
            log(`Starting Session #${sessionCount}...`);
            log(`   üìÑ User-Agent: ${ua.substring(0, 30)}...`, "#bdc3c7");

            // Simulate Page View
            const success = await sendRequest(target, ua);
            if (success) {
                log(`   ‚úÖ Impression successful`);
            } else {
                log(`   ‚ö†Ô∏è Impression failed (Site may block proxies)`, "#e67e22");
            }

            // CTR Logic (approx 3% chance of click)
            if (Math.random() < 0.03) {
                clickCount++;
                log(`   üí∞ CLICK TRIGGERED!`, "#f1c40f");
                await sendRequest(target, ua);
            }

            document.getElementById('statusBar').innerText = `Sessions: ${sessionCount} | Clicks: ${clickCount}`;

            // Random delay between sessions (3-7 seconds)
            if (isRunning) {
                const wait = Math.floor(Math.random() * 4000) + 3000;
                log(`‚è≥ Waiting ${wait}ms for next user...`, "#7f8c8d");
                await new Promise(r => setTimeout(r, wait));
            }
        }
    }

    function stopSimulation() {
        isRunning = false;
        document.getElementById('startBtn').disabled = false;
        document.getElementById('stopBtn').disabled = true;
        log("Stopping simulation...", "#e74c3c");
    }
</script>

</body>
</html>
